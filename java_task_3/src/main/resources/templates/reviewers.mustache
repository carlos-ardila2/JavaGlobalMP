{{>header}}
<main>
  <h1>Reviewers</h1>
  <table>
    <thead>
    <tr>
      <th>Name</th>
      <th>Reviews</th>
      <th></th>
    </tr>
    </thead>
    <tbody>
    {{#reviewerList}}
      <tr>
        <td>{{name}}</td>
        <td>{{reviewCount}}</td>
        <td>
          <a id="open-edit-dialog" class="open-dialog" href="/api/reviewers/{{id}}">Edit</a>
          <a id="open-delete-dialog" class="spaced delete open-dialog" href="/api/reviewers/{{id}}">Delete</a>
        </td>
      </tr>
      {{#reviewsPresent}}
      <tr>
        <td class="expandable" colspan="3">
          <details>
            <summary>
              Reviews
            </summary>
            <table class="inner">
              <thead>
              <tr>
                <th>Book</th>
                <th>Chapter</th>
                <th>Content</th>
              </tr>
              </thead>
              <tbody>
              {{#reviews}}
                <tr>
                  <td>{{bookChapter.book.title}}</td>
                  <td>{{bookChapter.title}}</td>
                  <td class="text-content"><p>{{content}}</p></td>
                </tr>
              {{/reviews}}
              </tbody>
            </table>
          </details>
        </td>
      </tr>
      {{/reviewsPresent}}
    {{/reviewerList}}
    </tbody>
  </table>
  <div class="below"><a id="open-add-dialog" class="open-dialog" href="/api/reviewers"><em>Add Reviewer</em></a></div>
</main>
<dialog id="add-dialog">
  <form id="add-dialog-form" method="dialog">
    <label for="reviewer-name">Reviewer name and last name:</label>
    <input type="text" id="reviewer-name" name="name" required minlength="4" maxlength="40" size="10" />
    <section class="button-bar">
      <button type="submit">Add</button>
      <button id="close-add-dialog" type="button" class="close">Cancel</button>
    </section>
  </form>
</dialog>
<dialog id="delete-dialog">
  <form id="delete-dialog-form" method="dialog">
    <p>Are you sure you want to delete this reviewer?</p>
    <section class="button-bar">
      <button type="submit">Yes</button>
      <button id="close-delete-dialog" type="button" class="close">No</button>
    </section>
  </form>
</dialog>
{{>footer}}